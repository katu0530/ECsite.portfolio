<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>[[${title}]]</title>
<link rel="stylesheet"
	th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{../../css/style.css}">
</head>

<body>
	<header th:replace="~{parts/common :: page_header}"></header>
	<main>
		<h1 class="my-4">[[${title}]]</h1>
		<form class="row g-3 size " action="" method="post"
			enctype="multipart/form-data" th:object="${item}">
			<div class="col-md-12 disply">
				<label for="itemName" class="form-label">商品名</label> <span
					th:errors="*{itemName}" class="error"></span> <input type="text"
					class="form-control" th:field="*{itemName}">
			</div>
			<div class="col-md-12 disply">
				<label for="price" class="form-label">価格</label> <span
					th:errors="*{price}" class="error"></span> <input type="text"
					class="form-control" th:field="*{price}">
			</div>
			<div class="col-md-12 disply">
				<label for="itemIntroduction" class="form-label">商品説明</label> <span
					th:errors="*{itemIntroduction}" class="error"></span> <input
					type="text" class="form-control" th:field="*{itemIntroduction}">
			</div>
			<div class="col-md-12 disply">
				<label for="photo" class="form-label">商品画像</label> <span
					th:errors="*{photo}" class="error"></span> <input type="file"
					class="form-control" th:field="*{upfile}">
			</div>
			<div class="col-12">
				<button type="submit" class="btn btn-primary">登録</button>
			</div>
		</form>
		<p class="mt-4">
			<a th:href="@{/admin/itemmanagement}">一覧に戻る</a>
		</p>
	</main>
	<footer> </footer>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	<script>
const MAX_FILE_SIZE = 10000000; // 10MB
const form = document.getElementById('form');
const upfile = document.getElementById('upfile');
form.addEventListener('submit', (event) => {
const file = upfile.files[0];
if(file != undefined && file.size >= MAX_FILE_SIZE) {
// 送信しない
event.preventDefault();
// エラーメッセージを含むspan 要素を生成
const errorElement = document.createElement('span');
errorElement.classList.add('error');
errorElement.textContent = 'ファイルサイズが大き過ぎます';
// input タグの親要素(p 要素)の前にメッセージを出力
upfile.parentNode.before(errorElement);
}
});
</script>
</body>

</html>